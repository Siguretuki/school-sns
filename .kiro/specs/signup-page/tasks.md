# Implementation Plan

## Task 1. サインアップページのルーティングと画面骨格

- [x] 1.1 (P) サインアップページを`/auth/signup`で表示できるようにする
  - `/auth/signup`にアクセスした際にページがレンダリングされる状態を作る
  - ログインページと一貫した中央配置・カード中心のレイアウトを適用する
  - 「新規登録」であることが分かる見出しとブランド要素を表示する
  - 「ログイン」導線を設置し、ログイン画面へ遷移できるようにする
  - 画面が狭い場合でも操作不能にならないレイアウトにする
  - Google認証が利用可能な導線（区切り + ボタン）を配置できるようにする
  - _Requirements: 1.1, 1.2, 1.4, 2.1, 2.2, 2.3, 2.4, 5.1_

- [x] 1.2 (P) ログインページからサインアップへの導線を整合させる
  - ログイン画面の「新規登録」導線が`/auth/signup`へ遷移することを確認し、必要なら修正する
  - _Requirements: 1.3_

## Task 2. サインアップフォームUIとクライアントバリデーション

- [x] 2.1 (P) サインアップフォームの入力UIを用意する
  - メールアドレス入力欄を提供する
  - パスワード入力欄を提供し、必要に応じて表示切替（可視/不可視）を可能にする
  - 表示名の入力欄を任意項目として提供する
  - 入力欄にアクセシブルな名前（ラベル等）を付与する
  - キーボード操作のみでフォーム送信まで到達できるようにする
  - _Requirements: 3.1, 3.2, 6.3, 6.4_

- [x] 2.2 入力バリデーションとエラー表示を追加する
  - メールアドレスの形式不正を送信前に検出し、ユーザーにエラー表示する
  - パスワードが8文字未満の場合に送信前に検出し、ユーザーにエラー表示する
  - 表示名が30文字を超える場合に送信前に検出し、ユーザーにエラー表示する
  - バリデーション失敗時も入力内容は保持し、再入力が可能な状態にする
  - _Requirements: 3.3, 3.4, 3.5, 4.5_

## Task 3. サインアップAPI連携と送信フロー

- [x] 3.1 (P) サインアップAPI呼び出しをフロントエンドに追加する
  - サインアップのリクエスト入力をバックエンドのスキーマと同期した型で扱えるようにする
  - サインアップ送信の処理を追加し、HTTPエラー時にユーザー向けエラーとして扱えるようにする
  - 成功時に「ログイン済みユーザー情報」の再取得が走るよう更新処理を入れる
  - _Requirements: 4.1, 4.3, 4.4_

- [x] 3.2 サインアップフォーム送信をAPIと接続し、成功/失敗を扱う
  - 有効な入力で送信した場合にサインアップAPIへリクエストを送信する
  - 送信中は二重送信が発生しないように制御する（ボタン無効化等）
  - 成功時はログイン後の既定画面へ遷移する
  - メール重複（409相当）を検知した場合は、重複をユーザーに通知し再入力を促す
  - ネットワークエラーや不明な失敗時は、入力を保持したまま再試行可能な通知を行う
  - エラーメッセージやログに機微情報（パスワード等）を含めない
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 6.1, 6.2_

## Task 4. Google認証（任意機能）の完了体験とエラーハンドリング

- [x] 4.1 (P) Google認証完了後にSPAへ戻る動線を実装する
  - Google認証成功時に、セッション確立後フロントエンドへ戻るリダイレクトを行う
  - 失敗時に、ユーザーが失敗を認識できる戻り方（例: エラー情報付き）を用意する
  - _Requirements: 5.3, 5.4_

- [x] 4.2 Google認証の開始・失敗通知・再試行をサインアップページで成立させる
  - Google認証導線を押下した際に認証フローが開始されることを確認する
  - 認証開始や戻り処理が失敗した場合に、ユーザーへ通知し再試行可能にする
  - _Requirements: 5.2, 5.4_

## Task 5. テストで主要導線とエラー分岐を担保する

- [x] 5.1 (P) サインアップページの基本レンダリングと導線のテストを追加する
  - サインアップページが表示され、見出し/ブランド要素/ログイン導線が存在することを確認する
  - ログインページからサインアップへの導線が正しいことを確認する
  - _Requirements: 1.1, 1.2, 1.3, 2.1, 2.3_

- [x] 5.2 サインアップフォームのバリデーションと送信中制御をテストする
  - 不正なメール形式、短いパスワード、長すぎる表示名で送信が抑止されることを確認する
  - 送信中に二重送信が起きないことを確認する
  - _Requirements: 3.3, 3.4, 3.5, 4.2_

- [ ]\* 5.3 Google認証の成功/失敗時の遷移を統合テストまたはE2Eで確認する
  - 成功時にログイン後の既定画面へ到達できることを確認する
  - 失敗時にエラー通知が表示され、再試行できることを確認する
  - _Requirements: 5.3, 5.4_
