# Implementation Plan

## Tasks

- [x] 1. 設定画面の基盤構築
- [x] 1.1 認証ガード付きルートの作成
  - 設定画面へのアクセス時に認証状態を検証する
  - 未認証ユーザーをログインページへリダイレクトする
  - ユーザー情報をプリフェッチしてキャッシュに格納する
  - ローディング中の状態を適切に処理する
  - _Requirements: 7.1, 7.2, 7.3_

- [x] 1.2 設定画面のレイアウトコンポーネント作成
  - 最大幅（max-w-md）でコンテンツを中央に配置する
  - 各セクションを縦方向にレスポンシブ配置する
  - パステルカラーをアクセントとして適用する
  - Tailwind CSSでスタイリングを実装する
  - _Requirements: 6.1, 6.2, 6.4, 6.5, 6.6_

- [x] 2. プロフィール表示機能
- [x] 2.1 (P) プロフィール表示セクションの作成
  - ユーザーのアバター画像を円形で表示する
  - ユーザー名と自己紹介文を表示する
  - アバター未設定時はプレースホルダーアイコンを表示する
  - 自己紹介未設定時はプレースホルダーテキストを表示する
  - 編集モードへの切り替えボタンを配置する
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 2.1_

- [x] 3. プロフィール編集機能
- [x] 3.1 プロフィール更新用APIフックの作成
  - ユーザー情報更新のmutation hookを作成する
  - 成功時にキャッシュを無効化してデータを再取得する
  - エラーハンドリングを実装する
  - _Requirements: 2.5, 2.6, 2.7_

- [x] 3.2 プロフィール編集フォームhookの作成
  - TanStack Form + Zodでフォーム状態を管理する
  - ユーザー名、自己紹介、アバターURLのバリデーションを実装する
  - 保存・キャンセル操作のコールバックを提供する
  - _Requirements: 2.4, 2.5, 2.8_

- [x] 3.3 プロフィール編集フォームUIの作成
  - アバターURL入力とプレビュー表示を実装する
  - 自己紹介文のテキストエリアを作成する
  - リアルタイム入力反映を実装する
  - 保存・キャンセルボタンを配置する
  - 送信中のローディング状態を表示する
  - _Requirements: 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8_

- [x] 4. アカウント設定機能
- [x] 4.1 (P) アカウント設定セクションの作成
  - 通知設定のトグルUIを作成する
  - プライバシー設定のトグルUIを作成する
  - トグル切り替え時に状態を即座に反映する
  - 設定保存中のローディングインジケーターを表示する
  - ローカル状態での動作を実装する
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [x] 5. ログアウト機能
- [x] 5.1 確認ダイアログコンポーネントの作成
  - モーダル形式の汎用確認ダイアログを作成する
  - 確認・キャンセルボタンを配置する
  - ローディング状態とdanger variantをサポートする
  - _Requirements: 4.2, 4.6_

- [x] 5.2 ログアウトmutation hookの作成
  - ログアウトAPIを呼び出すmutationを作成する
  - 成功時にログインページへリダイレクトする
  - エラー時にエラーメッセージを表示する
  - _Requirements: 4.3, 4.4, 4.5_

- [x] 5.3 ログアウトセクションUIの作成
  - 目立つ位置にログアウトボタンを配置する
  - ボタンクリックで確認ダイアログを表示する
  - ダイアログの確認・キャンセル操作を処理する
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_

- [x] 6. バージョン情報表示
- [x] 6.1 (P) バージョン情報コンポーネントの作成
  - アプリ名を表示する
  - バージョン番号を表示する
  - 画面下部に配置する
  - _Requirements: 5.1, 5.2_

- [x] 7. 統合とアイコン対応
- [x] 7.1 設定画面の統合
  - 全セクションをSettingsPageに組み込む
  - セクション間の余白とスタイリングを調整する
  - lucide-reactアイコンを各セクションに適用する
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6_

- [x]\* 7.2 統合テストの実装
  - 設定画面アクセス時のプロフィール表示を検証する
  - プロフィール編集の保存・キャンセル動作を検証する
  - ログアウトフローを検証する
  - _Requirements: 1.1, 1.2, 1.3, 2.5, 2.6, 2.8, 4.3, 4.4_
